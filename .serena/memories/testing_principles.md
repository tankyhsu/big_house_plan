# 测试原则

## 重要规则：永远不要在业务数据库上测试！

### 数据库使用规则
- ✅ **测试时使用**：`test.db` 或专门的测试数据库
- ❌ **禁止测试**：`portfolio.db`、`backend/data/portfolio.db` 等生产数据库
- 所有功能验证都必须在隔离的测试环境中进行

### 测试环境设置
- 使用 `PORT_DB_PATH` 环境变量指向测试数据库
- 或者在代码中明确指定测试数据库路径
- 确保测试数据不会影响实际的业务数据

### 数据清理责任
- 测试后必须清理所有测试数据
- 检查相关表的数据一致性（如position表中的现金余额）
- 确保生产数据库状态不受影响

### 记住
**测试应该是安全的、可重复的、不影响生产环境的！**